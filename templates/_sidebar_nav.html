<ul class="nav flex-column flex-grow-1">
    <li class="nav-item">
        <a class="nav-link {% if request.endpoint == 'index' %}active{% endif %}"
           href="{{ url_for('index') }}">
            <i class="bi bi-house"></i> Dashboard
        </a>
    </li>
    <hr style="border-color: rgba(255,255,255,0.1); margin: 8px 0;">
    <li class="nav-item">
        <a class="nav-link {% if request.endpoint in ('contact_list', 'contact_chat', 'business_opportunities_page') %}active{% endif %}"
           href="{{ url_for('contact_list') }}">
            <i class="bi bi-people"></i> Contact List
        </a>
        <ul class="nav flex-column ms-3">
            <li class="nav-item">
                <a class="nav-link sub-link {% if request.endpoint == 'contact_list' %}active{% endif %}"
                   href="{{ url_for('contact_list') }}">
                    연락처 목록
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link sub-link {% if request.endpoint == 'business_opportunities_page' %}active{% endif %}"
                   href="{{ url_for('business_opportunities_page') }}">
                    <i class="bi bi-briefcase"></i> Business Opportunities
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link sub-link {% if request.endpoint == 'contact_chat' %}active{% endif %}"
                   href="{{ url_for('contact_chat') }}">
                    AI Chat
                </a>
            </li>
        </ul>
    </li>
    <hr style="border-color: rgba(255,255,255,0.1); margin: 8px 0;">
    <li class="nav-item">
        <a class="nav-link {% if request.endpoint == 'daily_news' %}active{% endif %}"
           href="{{ url_for('daily_news') }}">
            <i class="bi bi-newspaper"></i> Daily News
        </a>
    </li>
    <li class="nav-item">
        <a class="nav-link {% if request.endpoint in ('bestsellers', 'bestsellers_global', 'bestsellers_kr') %}active{% endif %}"
           href="{{ url_for('bestsellers') }}">
            <i class="bi bi-book"></i> Bestsellers
        </a>
        {% if request.endpoint in ('bestsellers', 'bestsellers_global', 'bestsellers_kr') %}
        <ul class="nav flex-column ms-3">
            <li class="nav-item">
                <a class="nav-link sub-link {% if request.endpoint == 'bestsellers_kr' %}active{% endif %}"
                   href="{{ url_for('bestsellers_kr') }}">
                    국내 Bestsellers
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link sub-link {% if request.endpoint == 'bestsellers_global' %}active{% endif %}"
                   href="{{ url_for('bestsellers_global') }}">
                    해외 Bestsellers
                </a>
            </li>
        </ul>
        {% endif %}
    </li>
    <li class="nav-item">
        <a class="nav-link {% if request.endpoint in ('my_books', 'book_library', 'book_hall_of_fame', 'book_recommendations', 'book_saved', 'book_reading') %}active{% endif %}"
           href="{{ url_for('my_books') }}">
            <i class="bi bi-journal-bookmark"></i> My Books
        </a>
        {% if request.endpoint in ('my_books', 'book_library', 'book_hall_of_fame', 'book_recommendations', 'book_saved', 'book_reading') %}
        <ul class="nav flex-column ms-3">
            <li class="nav-item">
                <a class="nav-link sub-link {% if request.endpoint == 'book_reading' %}active{% endif %}"
                   href="{{ url_for('book_reading') }}">
                    Books I am reading
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link sub-link {% if request.endpoint == 'book_library' %}active{% endif %}"
                   href="{{ url_for('book_library') }}">
                    Library
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link sub-link {% if request.endpoint == 'book_hall_of_fame' %}active{% endif %}"
                   href="{{ url_for('book_hall_of_fame') }}">
                    Hall of Fame
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link sub-link {% if request.endpoint == 'book_recommendations' %}active{% endif %}"
                   href="{{ url_for('book_recommendations') }}">
                    Recommendations
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link sub-link {% if request.endpoint == 'book_saved' %}active{% endif %}"
                   href="{{ url_for('book_saved') }}">
                    Saved Books
                </a>
            </li>
        </ul>
        {% endif %}
    </li>
</ul>
<div class="mt-auto">
    <hr style="border-color: rgba(255,255,255,0.1); margin: 8px 0;">
    <button class="push-bell-btn nav-link border-0 bg-transparent w-100 text-start"
            onclick="window._togglePushNotification()"
            title="알림 끄짐 (클릭하여 켜기)">
        <i class="bi bi-bell text-secondary"></i>
        <span class="ms-2 text-secondary small">알림</span>
    </button>
    {% if current_user.is_authenticated and current_user.username == "tornadogrowth" %}
    <a class="nav-link {% if request.endpoint == 'admin_security' %}active{% endif %}"
       href="{{ url_for('admin_security') }}">
        <i class="bi bi-shield-lock"></i> Admin
    </a>
    {% endif %}
    <form action="{{ url_for('logout') }}" method="post" class="mt-1">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        <button type="submit" class="nav-link text-muted border-0 bg-transparent w-100 text-start">
            <i class="bi bi-box-arrow-left"></i> 로그아웃
        </button>
    </form>
</div>
